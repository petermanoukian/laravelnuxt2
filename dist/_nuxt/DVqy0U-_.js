import{u as F,a as R,r as l,o as q,w as V,c as n,b as x,d as t,e as E,f as I,m as h,j as N,t as b,h as y,g as A,v as D,_ as P,i as r,k as $,l as H}from"./BkfL23Qh.js";import{u as L}from"./C-aMhIz_.js";import{S as W,M as z}from"./BrcG7ohK.js";import{u as G}from"./CXs0n1RF.js";import{s as J}from"./DzOTmNw2.js";import"./DoXzrDiw.js";const K={class:"bg-gray-100 font-family-karla flex"},O={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},Q={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},X={class:"w-full flex-grow p-6"},Y={class:"flex items-center justify-center bg-gray-100"},Z={class:"fullwidth90 bg-white p-8 shadow-md rounded-lg"},ee={class:"mb-4"},te={key:0,class:"mb-4"},se={key:0},oe={key:1},le={class:"mb-4"},ae={class:"mb-4"},ne={class:"mb-4"},re={key:0,class:"mt-2 text-sm text-red-600"},de={key:1,class:"mt-2 text-sm text-red-600"},ue={key:2,class:"mt-2 text-sm text-red-600"},ge={__name:"addsubcategory",setup(ie){const{cats:w,fetchCatsCommon:U}=G(),M=L(),T=F(),_=R(),d=l(""),v=l(""),u=l(null),i=l(null),c=l(null),m=l(""),p=l(""),g=l(""),k=_.params.catid;k!=""&&(u.value=k);const C=s=>{u.value=s?s.id:null},B=async()=>{const{$api:s}=$(),e=H().public.apiBaseUrl,a=new FormData;a.append("name",d.value),a.append("des",v.value),a.append("catid",u.value),c.value&&a.append("pic",c.value);try{const o=await s.post(`${e}/admin/subcat/add`,a);console.log("SubCategory added successfully:",o.data),g.value="subcategoty aded "+d.value+" ... you will be redircted in a monent ...",setTimeout(S,100),setTimeout(()=>{T.push("/admin/subcat/viewsubcat")},300)}catch(o){o.response&&o.response.status===422?p.value=o.response.data.message:p.value="An unexpected error occurred."}};q(async()=>{await M.fetchUser(),await U()}),V(_,()=>{S()}),V(i,s=>{console.log("selectedCat changed:",s),C(s)});const j=s=>{const e=s.target.files[0];e&&!e.type.startsWith("image/")?(m.value="Please upload a valid image file.",c.value=null):(m.value="",c.value=e)},S=async()=>{d.value="",v.value="",u.value="",c.value=null,m.value="",p.value="",g.value="";const s=document.querySelectorAll('input[type="file"]');s.length>0&&(s[0].value="")};return(s,e)=>{var o;const a=P;return r(),n("div",K,[x(W),t("div",O,[e[11]||(e[11]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," Add SubCategory")],-1)),x(z),t("div",Q,[t("main",X,[t("div",Y,[t("div",Z,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold mb-4"},"Add Sub Category",-1)),t("p",ee,[x(a,{to:"/admin/subcat/viewsubcat",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:E(()=>e[3]||(e[3]=[t("i",{class:"fas fa-align-left mr-3"},null,-1),N("View subcategories")])),_:1})]),t("form",{onSubmit:I(B,["prevent"])},[h(w)?(r(),n("div",te,[e[4]||(e[4]=t("label",{for:"catid",class:"block text-sm font-medium text-gray-700"},"Category",-1)),x(h(J),{ref:"multiselect",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=f=>i.value=f),options:h(w),label:"name","track-by":"id",placeholder:"Choose category",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:C},null,8,["modelValue","options"]),N(" catid "+b(u.value)+" ",1),(o=i.value)!=null&&o.id?(r(),n("p",se,"Selected Category ID: "+b(i.value.id),1)):(r(),n("p",oe,"No category selected"))])):y("",!0),t("div",le,[e[5]||(e[5]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Title",-1)),A(t("input",{"onUpdate:modelValue":e[1]||(e[1]=f=>d.value=f),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[D,d.value]])]),t("div",ae,[e[6]||(e[6]=t("label",{for:"des",class:"block text-sm font-medium text-gray-700"}," Short Description",-1)),A(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=f=>v.value=f),class:"mt-1 block w-full px-3 py-3 textareashort border border-gray-300 rounded-md"},null,512),[[D,v.value]])]),t("div",ne,[e[7]||(e[7]=t("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),t("input",{type:"file",onChange:j,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),m.value?(r(),n("p",re,b(m.value),1)):y("",!0)]),e[8]||(e[8]=t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add",-1)),p.value?(r(),n("p",de,b(p.value),1)):y("",!0),g.value?(r(),n("p",ue,b(g.value),1)):y("",!0)],32)])])]),e[10]||(e[10]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{ge as default};
