import{w as $,i as c,c as d,d as t,F as y,p as N,t as f,b as w,e as R,j as k,s as p,_ as T,k as S,l as B,r as m,n as V,o as A,u as E,a as F,q as L,m as v,P as M}from"./BkfL23Qh.js";import{u as U}from"./C-aMhIz_.js";import{S as j,M as z}from"./BrcG7ohK.js";import"./DoXzrDiw.js";const D={class:"w-full mt-8 mb-8 fullwidth"},H={class:"grid fullwidth90"},I={class:"fullwidth45 floatleft"},_={class:"fullwidth40floatleft"},G={class:"bg-gray-100 fullwidth margintopbottom8"},J=["disabled"],K=["onClick","disabled"],O=["disabled"],Q={class:"marginleft5"},W={__name:"Tagg",props:{taggs:{type:Array,required:!0},currentPage:{type:Number,required:!0},pageNumbers:{type:Number,required:!0},lastPage:{type:Number,required:!0},changePage:{type:Function,required:!0}},setup(e){const h=e;return $(()=>h.taggs,u=>{console.log("Items updated now:",u)}),(u,l)=>{const r=T;return c(),d(y,null,[t("div",D,[t("div",H,[(c(!0),d(y,null,N(e.taggs,a=>(c(),d("div",{key:a.id,class:"border fullwidth padding8"},[t("div",I,f(a.id)+" "+f(a.name),1),t("div",_,[w(r,{to:`/admin/tagg/edit/${a.id}`},{default:R(()=>l[2]||(l[2]=[k(" â€º Edit ")])),_:2},1032,["to"])])]))),128))])]),t("div",G,[t("button",{onClick:l[0]||(l[0]=a=>e.changePage(e.currentPage-1)),disabled:e.currentPage===1,class:p(["marginleft5",{red:e.currentPage===1,active:e.currentPage===1}])}," << Previous",10,J),(c(!0),d(y,null,N(e.pageNumbers,a=>(c(),d("span",{key:a,class:"marginleft5"},[t("button",{onClick:i=>e.changePage(a),class:p({red:a===e.currentPage,active:a===e.currentPage}),disabled:a===e.currentPage},f(a),11,K)]))),128)),t("button",{onClick:l[1]||(l[1]=a=>e.changePage(e.currentPage+1)),disabled:e.currentPage===e.lastPage,class:p(["marginleft5",{red:e.currentPage===e.lastPage,active:e.currentPage===e.lastPage}])}," >> Next",10,O),t("span",Q,"Page "+f(e.currentPage)+" of "+f(e.lastPage),1)])],64)}}};function X(){const{$api:e}=S(),h=B().public.apiBaseUrl,u=m([]),l=m(1),r=m(1),a=m(12),i=m(0),P=async(s=1)=>{try{const n=await e.get(`${h}/admin/tagg/view?page=${s}&per_page=${a.value}`);u.value=n.data.data,l.value=n.data.current_page,r.value=n.data.last_page,i.value=n.data.total}catch(n){console.error("Error fetching items:",n.response?n.response.data:n.message)}},b=s=>{s>0&&s<=r.value&&(l.value=s,P(s))},x=V(()=>{let s=[];for(let n=1;n<=r.value;n++)s.push(n);return s});return{taggs:u,currentPage:l,lastPage:r,perPage:a,totalTaggs:i,fetchTaggs:P,changePage:b,pageNumbers:x}}const Y={class:"bg-gray-100 font-family-karla flex"},Z={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},ee={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},te={class:"w-full flex-grow p-6"},ae={class:"text-2xl font-bold mb-4"},re={__name:"viewtagg",setup(e){const{taggs:h,currentPage:u,lastPage:l,changePage:r,pageNumbers:a,fetchTaggs:i}=X(),P=U();A(async()=>{await P.fetchUser(),i()});const b=m(0),x=E(),s=F(),n=()=>{console.log("Route refresh attempt"),b.value+=1,console.log("key value"+b.value),console.log(s.path),x.replace({path:s.path}).then(()=>{console.log("Navigation ok, route replaced to "+s.path)}).catch(g=>{console.error("Navigation error:",g)}),console.log("end"),i()};return $(s,async(g,o)=>{console.log("Route changed from",o.path,"to",g.path),await i()}),(g,o)=>{const C=T,q=W;return c(),d("div",Y,[w(j),t("div",Z,[o[3]||(o[3]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," View Tags ")],-1)),w(z),t("div",ee,[t("main",te,[t("h1",ae,[o[1]||(o[1]=k("View Tags ")),w(C,{to:"/admin/tagg/addtagg",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:R(()=>o[0]||(o[0]=[t("i",{class:"fas fa-align-left mr-3"},null,-1),k("Add Tag")])),_:1})]),(c(),L(q,{taggs:v(h),currentPage:v(u),lastPage:v(l),changePage:v(r),pageNumbers:v(a),key:b.value.value},null,8,["taggs","currentPage","lastPage","changePage","pageNumbers"])),t("p",null,"Current Route: "+f((g._.provides[M]||g.$route).path),1),t("button",{onClick:n,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3"},"Refresh Route")]),o[2]||(o[2]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{re as default};
