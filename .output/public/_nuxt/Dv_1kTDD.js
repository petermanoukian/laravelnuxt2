import{u as G,_ as I}from"./C5NpTOTi.js";import{u as J,a as K,r as g,k as O,l as P,o as Q,w as T,c as n,b as C,d as t,t as m,m as l,f as B,g as v,y as b,F as y,p as w,q as W,P as X,i as a}from"./BkfL23Qh.js";import{_ as Y}from"./DoXzrDiw.js";import{u as Z}from"./C-aMhIz_.js";import{S as ee,M as te}from"./BrcG7ohK.js";import{u as oe}from"./CXs0n1RF.js";import{u as se}from"./D1evIxhf.js";import"./DzOTmNw2.js";const le={class:"bg-gray-100 font-family-karla flex"},ae={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},re={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},ne={class:"w-full flex-grow p-6"},ue={class:"text-2xl font-bold mb-4"},ie={key:0},de={key:0},ce=["src","alt"],pe={key:1},me={key:1},ge={class:"fullwidth"},fe=["value"],ve={class:"fullwidth mt-3"},be=["value"],ye=["value"],_e={__name:"index",setup(we){const{cats:h,fetchCatsCommon:$}=oe(),{subcats:_,fetchSubcatsCommon:x}=se(),{prods:V,currentPage:R,lastPage:N,changePage:A,pageNumbers:U,fetchProds:S}=G(),M=P(),d=J(),f=K(),r=f.params.catid,c=g(null),i=g(r),u=g(r),p=g(null),{$api:q}=O(),D=P().public.apiBaseUrl,E=async()=>{try{const s=await q.get(`${D}/admin/cat/detail/${r}`);c.value=s.data,console.log("line33"+s.data),console.log("line34"+s.data)}catch(s){console.error("Error fetching item:",s.response?s.response.data:s.message)}},F=Z();Q(async()=>{await F.fetchUser(),await E(),await S(r),await $(),await x(r),i.value=r,u.value=r});const k=g(0),L=()=>{k.value+=1,d.replace({path:f.path}).then(()=>{console.log("Navigation ok, route replaced to "+f.path)}).catch(s=>{console.error("Navigation error:",s)}),console.log("end"),S(r)};T(f,async(s,e)=>{console.log("Route changed from",e.path,"to",s.path),await fetchprods(r)});const j=()=>{i.value!=""&&i.value!=null&&i.value>0?d.push(`/admin/prod/viewprodbycatid/${i.value}`):d.push("/admin/prod/viewprod")},H=()=>{u.value&&u.value!=null&&u.value>0?p.value&&p.value!=null&&p.value>0?d.push(`/admin/prod/viewprodbycatidsubid/${u.value}/${p.value}`):d.push(`/admin/prod/viewprodbycatid/${u.value}`):d.push("/admin/prod/viewprod")};return(s,e)=>{const z=I;return a(),n("div",le,[C(ee),t("div",ae,[e[16]||(e[16]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," View products by Category ")],-1)),C(te),t("div",re,[t("main",ne,[t("h1",ue,"View Products By category "+m(l(r)),1),c.value?(a(),n("div",ie,[t("h1",null,"Category Detail "+m(c.value.name),1),c.value.img?(a(),n("p",de,[t("img",{src:`${l(M).public.BaseUrl}/images/cat/thumb/${c.value.img}`,alt:c.value.name,class:"mt-2 mb-2"},null,8,ce)])):(a(),n("p",pe,e[4]||(e[4]=[t("img",{src:Y,alt:"Default Picture",class:"mt-2 mb-2"},null,-1)])))])):(a(),n("div",me,e[5]||(e[5]=[t("p",null,"Loading category...",-1)]))),t("div",ge,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold mb-4"},"View By Category",-1)),t("form",{onSubmit:B(j,["prevent"])},[e[7]||(e[7]=t("label",{for:"catSelect"},"Select Category:",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),id:"catSelect",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[6]||(e[6]=t("option",{value:"null"}," All categories",-1)),(a(!0),n(y,null,w(l(h),o=>(a(),n("option",{key:o.id,value:o.id},m(o.name),9,fe))),128))],512),[[b,i.value]]),e[8]||(e[8]=t("button",{type:"submit",class:"mt-3 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none width400px"}," View Products By category",-1))],32)]),t("div",ve,[t("form",{onSubmit:B(H,["prevent"])},[e[12]||(e[12]=t("label",{for:"catSelect2"},"Select Category:",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),id:"catSelect2",onChange:e[2]||(e[2]=o=>l(x)(u.value)),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[10]||(e[10]=t("option",{value:"null"}," All categories",-1)),(a(!0),n(y,null,w(l(h),o=>(a(),n("option",{key:o.id,value:o.id},m(o.name),9,be))),128))],544),[[b,u.value]]),e[13]||(e[13]=t("label",{for:"subcatSelect"},"Select Subcategory:",-1)),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),id:"subcatSelect",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[11]||(e[11]=t("option",{value:"null"}," All Subcategories",-1)),(a(!0),n(y,null,w(l(_),o=>(a(),n("option",{key:o.id,value:o.id},m(o.name),9,ye))),128))],512),[[b,p.value]]),e[14]||(e[14]=t("button",{type:"submit",class:"mt-3 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none width400px"}," View Products By category and Subcategory",-1))],32)]),(a(),W(z,{prods:l(V),currentPage:l(R),lastPage:l(N),changePage:l(A),pageNumbers:l(U),key:k.value.value,catid:l(r)},null,8,["prods","currentPage","lastPage","changePage","pageNumbers","catid"])),t("p",null,"Current Route: "+m((s._.provides[X]||s.$route).path),1),t("button",{onClick:L,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3"},"Refresh Route")]),e[15]||(e[15]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{_e as default};
