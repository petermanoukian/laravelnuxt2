import{u as O,_ as Q}from"./C5NpTOTi.js";import{u as T,a as W,r as v,k as X,l as V,o as Y,w as Z,c as a,b as R,d as t,t as i,m as r,f as N,g as y,y as w,F as h,p as x,q as ee,P as te,i as l}from"./BkfL23Qh.js";import{_ as U}from"./DoXzrDiw.js";import{u as oe}from"./C-aMhIz_.js";import{S as se,M as le}from"./BrcG7ohK.js";import{u as ae}from"./CXs0n1RF.js";import{u as re}from"./D1evIxhf.js";import"./DzOTmNw2.js";const ne={class:"bg-gray-100 font-family-karla flex"},ue={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},ie={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},de={class:"w-full flex-grow p-6"},ce={class:"text-2xl font-bold mb-4"},me={key:0},pe={key:0},ge=["src","alt"],be={key:1},ve={key:1},fe={key:2},ye={key:0},we=["src","alt"],he={key:1},xe={key:3},Se={class:"fullwidth"},ke=["value"],Pe={class:"fullwidth mt-3"},Ce=["value"],_e=["value"],qe={__name:"[subid]",setup($e){const{cats:S,fetchCatsCommon:A}=ae(),{subcats:D,fetchSubcatsCommon:k}=re(),{prods:M,currentPage:q,lastPage:E,changePage:L,pageNumbers:F,fetchProds:P}=O(),C=V(),g=T(),f=W(),n=f.params.catid,b=v(null),d=f.params.subid,c=v(null),m=v(n),u=v(n),p=v(d),{$api:_}=X(),$=V().public.apiBaseUrl,j=async()=>{try{const o=await _.get(`${$}/admin/cat/detail/${n}`);b.value=o.data,console.log("line33"+o.data),console.log("line34"+o.data)}catch(o){alert(o),console.error("Error fetching item:",o.response?o.response.data:o.message)}},H=async()=>{try{const o=await _.get(`${$}/admin/subcat/detail/${d}`);c.value=o.data}catch(o){console.error("Error fetching item:",o.response?o.response.data:o.message)}},I=oe();Y(async()=>{await I.fetchUser(),await j(),await H(),await P(n,d),await A(),await k(n),m.value=n,u.value=n,p.value=d});const B=v(0),z=()=>{B.value+=1,g.replace({path:f.path}).then(()=>{console.log("Navigation ok, route replaced to "+f.path)}).catch(o=>{console.error("Navigation error:",o)}),console.log("end"),P(n,d)};Z(f,async(o,e)=>{console.log("Route changed from",e.path,"to",o.path),await fetchprods(n,d)});const G=()=>{m.value!=""&&m.value!=null&&m.value>0?g.push(`/admin/prod/viewprodbycatid/${m.value}`):g.push("/admin/prod/viewprod")},J=()=>{u.value&&u.value!=null&&u.value>0?p.value&&p.value!=null&&p.value>0?g.push(`/admin/prod/viewprodbycatidsubid/${u.value}/${p.value}`):g.push(`/admin/prod/viewprodbycatid/${u.value}`):g.push("/admin/prod/viewprod")};return(o,e)=>{const K=Q;return l(),a("div",ne,[R(se),t("div",ue,[e[18]||(e[18]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," View products by Category ")],-1)),R(le),t("div",ie,[t("main",de,[t("h1",ce,"View Products By category "+i(r(n)),1),b.value?(l(),a("div",me,[t("h1",null,"Category Detail "+i(b.value.name),1),b.value.img?(l(),a("p",pe,[t("img",{src:`${r(C).public.BaseUrl}/images/cat/thumb/${b.value.img}`,alt:b.value.name,class:"mt-2 mb-2"},null,8,ge)])):(l(),a("p",be,e[4]||(e[4]=[t("img",{src:U,alt:"Default Picture",class:"mt-2 mb-2"},null,-1)])))])):(l(),a("div",ve,e[5]||(e[5]=[t("p",null,"Loading category...",-1)]))),c.value?(l(),a("div",fe,[t("h1",null,i(c.value.name),1),t("h2",null,i(c.value.cat.name),1),t("p",null,"ID: "+i(r(d)),1),c.value.img?(l(),a("p",ye,[t("img",{src:`${r(C).public.BaseUrl}/images/subcat/thumb/${c.value.img}`,alt:c.value.name,class:"mt-2 mb-2"},null,8,we)])):(l(),a("p",he,e[6]||(e[6]=[t("img",{src:U,alt:"Default Picture",class:"mt-2 mb-2"},null,-1)])))])):(l(),a("div",xe,e[7]||(e[7]=[t("p",null,"Loading...",-1)]))),t("div",Se,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold mb-4"},"View By Category",-1)),t("form",{onSubmit:N(G,["prevent"])},[e[9]||(e[9]=t("label",{for:"catSelect"},"Select Category:",-1)),y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),id:"catSelect",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[8]||(e[8]=t("option",{value:"null"}," All categories",-1)),(l(!0),a(h,null,x(r(S),s=>(l(),a("option",{key:s.id,value:s.id},i(s.name),9,ke))),128))],512),[[w,m.value]]),e[10]||(e[10]=t("button",{type:"submit",class:"mt-3 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none width400px"}," View Products By category",-1))],32)]),t("div",Pe,[t("form",{onSubmit:N(J,["prevent"])},[e[14]||(e[14]=t("label",{for:"catSelect2"},"Select Category:",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),id:"catSelect2",onChange:e[2]||(e[2]=s=>r(k)(u.value)),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[12]||(e[12]=t("option",{value:"null"}," All categories",-1)),(l(!0),a(h,null,x(r(S),s=>(l(),a("option",{key:s.id,value:s.id},i(s.name),9,Ce))),128))],544),[[w,u.value]]),e[15]||(e[15]=t("label",{for:"subcatSelect"},"Select Subcategory:",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),id:"subcatSelect",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm width400px"},[e[13]||(e[13]=t("option",{value:"null"}," All Subcategories",-1)),(l(!0),a(h,null,x(r(D),s=>(l(),a("option",{key:s.id,value:s.id},i(s.name),9,_e))),128))],512),[[w,p.value]]),e[16]||(e[16]=t("button",{type:"submit",class:"mt-3 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none width400px"}," View Products By category and Subcategory",-1))],32)]),(l(),ee(K,{prods:r(M),currentPage:r(q),lastPage:r(E),changePage:r(L),pageNumbers:r(F),key:B.value.value,catid:r(n),subid:r(d)},null,8,["prods","currentPage","lastPage","changePage","pageNumbers","catid","subid"])),t("p",null,"Current Route: "+i((o._.provides[te]||o.$route).path),1),t("button",{onClick:z,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3"},"Refresh Route")]),e[17]||(e[17]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{qe as default};
