import{x as Z,u as ee,a as te,r as s,o as le,w as g,c as n,b as m,d as t,e as E,f as se,m as p,j as _,t as d,g as F,v as L,h as A,_ as oe,i as u,k as ae,l as ne}from"./BkfL23Qh.js";import{u as ue,S as de,_ as re,a as ie}from"./44wPXJ-d.js";import{u as ce}from"./C-aMhIz_.js";import{S as me,M as pe}from"./BrcG7ohK.js";import{u as ve}from"./CXs0n1RF.js";import{u as fe}from"./D1evIxhf.js";import{u as be}from"./FFSxNxS3.js";import{s as D}from"./DzOTmNw2.js";import"./DoXzrDiw.js";const ge={class:"bg-gray-100 font-family-karla flex"},ye={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},xe={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},he={class:"w-full flex-grow p-6"},we={class:"flex items-center justify-center bg-gray-100"},_e={class:"fullwidth90 bg-white p-8 shadow-md rounded-lg"},ke={class:"mb-4"},Ce={class:"mb-4"},Se={key:0},Ve={key:1},Ne={key:2},Te={key:3},Ue={class:"mb-4"},Ae={key:0},De={key:1},Me={key:2},Ie={key:3},Pe={class:"mb-4"},Be={class:"mb-4"},$e={class:"mb-4"},je={class:"mb-4"},Ee={class:"mb-4"},Fe={key:0,class:"mt-2 text-sm text-red-600"},Le={key:0,class:"mt-2 text-sm text-red-600"},Re={key:1,class:"mt-2 text-sm text-red-600"},qe={__name:"addproduct",setup(Ge){const{cats:k,fetchCatsCommon:R}=ve(),{subcats:C,fetchSubcatsCommon:U}=fe(),{taggs:q,fetchTaggsCommon:G}=be(),H=ce(),K=ee();te();const y=s(""),i=s(""),v=s(""),S=s(""),b=s(""),x=s(null),h=s(""),V=s([]),N=s([]),c=s(null),r=s(null),M=s(0),w=s(""),T=s(""),W=()=>{v.value=null,r.value=null},z=async()=>{const{$api:l}=ae(),e=ne().public.apiBaseUrl,o=new FormData;o.append("name",y.value),o.append("catid",i.value),o.append("subid",v.value),o.append("des",S.value),o.append("dess",b.value),o.append("taggid",V.value),x.value&&o.append("pic",x.value);try{const f=await l.post(`${e}/admin/prod/add`,o);console.log(" added successfully:",f.data),T.value="product added "+y.value+" ... you will be redircted in a monent ...",setTimeout(X,200),setTimeout(()=>{K.push("/admin/prod/viewprod")},300)}catch(f){f.response&&f.response.status===422?w.value=f.response.data.message:w.value="An unexpected error occurred."}};let I=s(null);le(async()=>{await H.fetchUser(),await R(),await U(),await G(),B(),O(),I.value=ue({content:b.value,extensions:[de],onUpdate:({editor:l})=>{b.value=l.getHTML()}})});const J=l=>{i.value=l?l.id:null,M.value+=1},P=l=>{v.value=l?l.id:null},B=()=>{if(i.value&&k.value.length){const l=Number(i.value),e=k.value.find(o=>o.id===l);c.value=e||null}},O=()=>{if(v.value&&C.value.length){const l=Number(v.value),e=C.value.find(o=>o.id===l);r.value=e||null}};g(M,l=>{l>1&&W()}),g(k,C,B),g(c,l=>{console.log("selectedCat changed:",l),J(l)}),g(r,l=>{console.log("selectedCat changed:",l),P(l)}),g(N,l=>{V.value=l.map(e=>e.id)});const Q=l=>{const e=l.target.files[0];e&&!e.type.startsWith("image/")?(h.value="Please upload a valid image file.",x.value=null):(h.value="",x.value=e)},X=async()=>{y.value="",i.value="",v.value="",V.value="",x.value=null,S.vale=null,b.value=null,h.value="",w.value="",T.value="";const l=document.querySelectorAll('input[type="file"]');l.length>0&&(l[0].value="")};return g(i,l=>{U(l)}),(l,e)=>{var $,j;const o=oe,f=ie,Y=re;return u(),n("div",ge,[m(me),t("div",ye,[e[21]||(e[21]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," Add Product ")],-1)),m(pe),t("div",xe,[t("main",he,[t("div",we,[t("div",_e,[e[19]||(e[19]=t("h1",{class:"text-2xl font-bold mb-4"},"Add Product",-1)),t("p",ke,[m(o,{to:"/admin/prod/viewprod",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:E(()=>e[7]||(e[7]=[t("i",{class:"fas fa-align-left mr-3"},null,-1),_("View Products")])),_:1})]),t("form",{onSubmit:se(z,["prevent"])},[t("div",Ce,[e[8]||(e[8]=t("label",{for:"catid",class:"block text-sm font-medium text-gray-700"},"Category",-1)),m(p(D),{ref:"multiselectcat",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),options:p(k),label:"name","track-by":"id",placeholder:"Choose category",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:e[1]||(e[1]=a=>p(U)(i.value))},null,8,["modelValue","options"]),_(" catid "+d(i.value)+" ",1),c.value?(u(),n("span",Se,d(c.value.id),1)):(u(),n("span",Ve," Nothing cat ")),($=c.value)!=null&&$.id?(u(),n("span",Ne," Selected Category ID: "+d(c.value.id),1)):(u(),n("span",Te," No category selected"))]),t("div",Ue,[e[9]||(e[9]=t("label",{for:"subid",class:"block text-sm font-medium text-gray-700"},"SubCategory",-1)),m(p(D),{ref:"multiselectsubcat",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),options:p(C),label:"name","track-by":"id",placeholder:"Choose subcategory",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:P},null,8,["modelValue","options","onChange"]),_(" subid "+d(v.value)+" ",1),r.value?(u(),n("span",Ae,d(r.value.id),1)):(u(),n("span",De," Nothin sub ")),(j=r.value)!=null&&j.id?(u(),n("span",Me," Selected Category ID: "+d(r.value.id),1)):(u(),n("span",Ie," No subcategory selected"))]),t("div",Pe,[e[10]||(e[10]=t("label",{for:"taggid",class:"block text-sm font-medium text-gray-700"},"Tags ",-1)),m(p(D),{modelValue:N.value,"onUpdate:modelValue":e[3]||(e[3]=a=>N.value=a),options:p(q),label:"name","track-by":"id",placeholder:"Choose tags",searchable:!0,"close-on-select":!0,"allow-empty":!0,class:"mt-1 block w-full",multiple:!0},null,8,["modelValue","options"]),e[11]||(e[11]=t("br",null,null,-1)),_(" TAGS "+d(V.value)+" ",1),e[12]||(e[12]=t("br",null,null,-1)),_(" TAGID "+d(N.value)+" ",1),e[13]||(e[13]=t("br",null,null,-1))]),t("div",Be,[e[14]||(e[14]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Name",-1)),F(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none"},null,512),[[L,y.value]])]),t("div",$e,[e[15]||(e[15]=t("label",{for:"des",class:"block text-sm font-medium text-gray-700"}," Short Description",-1)),F(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>S.value=a),type:"text",class:"mt-1 block w-full px-3 py-3 textareashort border border-gray-300 rounded-md"},null,512),[[L,S.value]])]),t("div",je,[e[16]||(e[16]=t("label",{for:"dess",class:"block text-sm font-medium text-gray-700"}," Long Description",-1)),m(Y,null,{default:E(()=>[m(f,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=a=>b.value=a),class:"textarealongborder",editor:p(I)},null,8,["modelValue","editor"])]),_:1})]),t("div",Ee,[e[17]||(e[17]=t("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),t("input",{type:"file",onChange:Q,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),h.value?(u(),n("p",Fe,d(h.value),1)):A("",!0)]),e[18]||(e[18]=t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add",-1)),w.value?(u(),n("p",Le,d(w.value),1)):A("",!0),T.value?(u(),n("p",Re,d(T.value),1)):A("",!0)],32)])])]),e[20]||(e[20]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}},Ze=Z(qe,[["__scopeId","data-v-203ab3cb"]]);export{Ze as default};
