import{u as j,a as F,r as d,o as R,w as k,c as u,b as y,d as t,t as r,e as q,f as E,m as S,j as N,g as V,v as A,h as w,_ as I,i,k as P,l as H}from"./BkfL23Qh.js";import{u as L}from"./C-aMhIz_.js";import{S as W,M as z}from"./BrcG7ohK.js";import{u as G}from"./CXs0n1RF.js";import{s as J}from"./DzOTmNw2.js";import"./DoXzrDiw.js";const K={class:"bg-gray-100 font-family-karla flex"},O={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},Q={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},X={class:"w-full flex-grow p-6"},Y={class:"flex items-center justify-center bg-gray-100"},Z={class:"fullwidth90 bg-white p-8 shadow-md rounded-lg"},ee={class:"text-2xl font-bold mb-4"},te={class:"mb-4"},se={class:"mb-4"},oe={key:0},le={key:1},ae={key:2},ne={key:3},de={class:"mb-4"},ue={class:"mb-4"},ie={class:"mb-4"},re={key:0,class:"mt-2 text-sm text-red-600"},ce={key:0,class:"mt-2 text-sm text-red-600"},me={key:1,class:"mt-2 text-sm text-red-600"},we={__name:"[catid]",setup(pe){const{cats:b,fetchCatsCommon:D}=G(),U=L(),M=j(),_=F().params.catid,c=d(""),g=d(""),l=d(""),a=d(null),m=d(null),p=d(""),f=d(""),x=d("");_!=""&&(l.value=_);const T=async()=>{const{$api:s}=P(),e=H().public.apiBaseUrl,o=new FormData;o.append("name",c.value),o.append("des",g.value),o.append("catid",l.value),m.value&&o.append("pic",m.value);try{const n=await s.post(`${e}/admin/subcat/add`,o);console.log("SubCategory added successfully:",n.data),x.value="subcategoty aded "+c.value+" ... you will be redircted in a monent ...",setTimeout($,100),setTimeout(()=>{M.push("/admin/subcat/viewsubcat")},300)}catch(n){n.response&&n.response.status===422?f.value=n.response.data.message:f.value="An unexpected error occurred."}};R(async()=>{await U.fetchUser(),await D(),C();const s=$refs.multiselect;s&&s.$on("input",h)});const h=s=>{l.value=s?s.id:null},C=()=>{if(l.value&&b.value.length){const s=Number(l.value),e=b.value.find(o=>o.id===s);a.value=e||null}};k(b,C),k(a,s=>{console.log("selectedCat changed:",s),h(s)});const B=s=>{const e=s.target.files[0];e&&!e.type.startsWith("image/")?(p.value="Please upload a valid image file.",m.value=null):(p.value="",m.value=e)},$=async()=>{c.value="",g.value="",l.value="",m.value=null,p.value="",f.value="",x.value="";const s=document.querySelectorAll('input[type="file"]');s.length>0&&(s[0].value="")};return(s,e)=>{var n;const o=I;return i(),u("div",K,[y(W),t("div",O,[e[10]||(e[10]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," Add sub Category ")],-1)),y(z),t("div",Q,[t("main",X,[t("div",Y,[t("div",Z,[t("h1",ee,"Add Sub Category Catid "+r(l.value),1),t("p",te,[y(o,{to:"/admin/subcat/viewsubcat",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:q(()=>e[3]||(e[3]=[t("i",{class:"fas fa-align-left mr-3"},null,-1),N("View subcategories")])),_:1})]),t("form",{onSubmit:E(T,["prevent"])},[t("div",se,[e[4]||(e[4]=t("label",{for:"catid",class:"block text-sm font-medium text-gray-700"},"Category",-1)),y(S(J),{ref:"multiselect",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=v=>a.value=v),options:S(b),label:"name","track-by":"id",placeholder:"Choose category",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:h},null,8,["modelValue","options"]),N(" catid "+r(l.value)+" ",1),a.value?(i(),u("p",oe,r(a.value.id),1)):(i(),u("p",le,"Nothin")),(n=a.value)!=null&&n.id?(i(),u("p",ae,"Selected Category ID: "+r(a.value.id),1)):(i(),u("p",ne,"No category selected"))]),t("div",de,[e[5]||(e[5]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Title",-1)),V(t("input",{"onUpdate:modelValue":e[1]||(e[1]=v=>c.value=v),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[A,c.value]])]),t("div",ue,[e[6]||(e[6]=t("label",{for:"des",class:"block text-sm font-medium text-gray-700"}," Short Description",-1)),V(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=v=>g.value=v),class:"mt-1 block w-full px-3 py-3 textareashort border border-gray-300 rounded-md"},null,512),[[A,g.value]])]),t("div",ie,[e[7]||(e[7]=t("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),t("input",{type:"file",onChange:B,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),p.value?(i(),u("p",re,r(p.value),1)):w("",!0)]),e[8]||(e[8]=t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add Admin",-1)),f.value?(i(),u("p",ce,r(f.value),1)):w("",!0),x.value?(i(),u("p",me,r(x.value),1)):w("",!0)],32)])])]),e[9]||(e[9]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{we as default};
