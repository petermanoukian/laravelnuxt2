import{u as S,a as A,r as l,o as N,w as V,c as m,b as v,d as t,e as D,f as M,g,v as y,t as x,h as b,_ as T,i as p,j as U,k as B,l as j}from"./BkfL23Qh.js";import{u as F}from"./C-aMhIz_.js";import{S as R,M as q}from"./BrcG7ohK.js";import"./DoXzrDiw.js";const E={class:"bg-gray-100 font-family-karla flex"},P={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},$={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},H={class:"w-full flex-grow p-6"},I={class:"flex items-center justify-center bg-gray-100"},L={class:"fullwidth90 bg-white p-8 shadow-md rounded-lg"},W={class:"mb-4"},z={class:"mb-4"},G={class:"mb-4"},J={class:"mb-4"},K={key:0,class:"mt-2 text-sm text-red-600"},O={key:0,class:"mt-2 text-sm text-red-600"},Q={key:1,class:"mt-2 text-sm text-red-600"},se={__name:"addcategory",setup(X){const w=F(),h=S(),_=A(),r=l(""),u=l(""),n=l(null),d=l(""),i=l(""),c=l(""),f=async()=>{r.value="",u.value="",n.value=null,d.value="",i.value="",c.value="";const o=document.querySelectorAll('input[type="file"]');o.length>0&&(o[0].value="")},k=async()=>{const{$api:o}=B(),e=j().public.apiBaseUrl,a=new FormData;a.append("name",r.value),a.append("des",u.value),n.value&&a.append("pic",n.value);try{const s=await o.post(`${e}/admin/cat/add`,a);console.log("Category added successfully:",s.data),c.value="categoty added "+r.value+" ... you will be redircted in a monent ...",setTimeout(f,100),setTimeout(()=>{h.push("/admin/cat/viewcat")},300)}catch(s){s.response&&s.response.status===422?i.value=s.response.data.message:i.value="An unexpected error occurred."}};N(async()=>{await w.fetchUser(),f()}),V(_,()=>{f()});const C=o=>{const e=o.target.files[0];e&&!e.type.startsWith("image/")?(d.value="Please upload a valid image file.",n.value=null):(d.value="",n.value=e)};return(o,e)=>{const a=T;return p(),m("div",E,[v(R),t("div",P,[e[9]||(e[9]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," Add Category")],-1)),v(q),t("div",$,[t("main",H,[t("div",I,[t("div",L,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold mb-4"},"Add Category",-1)),t("p",W,[v(a,{to:"/admin/cat/viewcat",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:D(()=>e[2]||(e[2]=[t("i",{class:"fas fa-align-left mr-3"},null,-1),U("View categories")])),_:1})]),t("form",{onSubmit:M(k,["prevent"])},[t("div",z,[e[3]||(e[3]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Title",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[y,r.value]])]),t("div",G,[e[4]||(e[4]=t("label",{for:"des",class:"block text-sm font-medium text-gray-700"}," Short Description",-1)),g(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"mt-1 block w-full px-3 py-3 textareashort border border-gray-300 rounded-md"},null,512),[[y,u.value]])]),t("div",J,[e[5]||(e[5]=t("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),t("input",{type:"file",onChange:C,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),d.value?(p(),m("p",K,x(d.value),1)):b("",!0)]),e[6]||(e[6]=t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add ",-1)),i.value?(p(),m("p",O,x(i.value),1)):b("",!0),c.value?(p(),m("p",Q,x(c.value),1)):b("",!0)],32)])])]),e[8]||(e[8]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}};export{se as default};
