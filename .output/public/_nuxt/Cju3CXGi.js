import{u as M,a as q,r as a,w,o as N,n as E,c as u,b as _,d as t,f as U,g as x,y as B,v as y,t as f,h as p,i as m}from"./BkfL23Qh.js";import{u as D}from"./C-aMhIz_.js";import{S as R,M as C}from"./BrcG7ohK.js";import"./DoXzrDiw.js";const j={class:"bg-gray-100 font-family-karla flex"},I={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},L={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},T={class:"w-full flex-grow p-6"},H={class:"flex items-center justify-center bg-gray-100"},W={class:"max-w-md w-full bg-white p-8 shadow-md rounded-lg"},$={class:"mb-4"},z={class:"mb-4"},G={class:"mb-4"},J={key:0,class:"mt-2 text-sm text-red-600"},K={class:"mb-4"},O={key:0,class:"mt-2 text-sm text-red-600"},Q={class:"mb-4"},X={key:0,class:"mt-2 text-sm text-red-600"},Y={key:0,class:"mt-2 text-sm text-red-600"},Z={key:1,class:"mt-2 text-sm text-red-600"},ae={__name:"register",setup(ee){const d=D();M();const P=q(),g=a(""),n=a(""),i=a(""),c=a(null),b=a("2"),l=a(""),o=a(""),v=a(""),h=async()=>{g.value="",n.value="",i.value="",b.value="2",l.value="",o.value="",v.value="",await d.resetRegistrationState(),l.value="",o.value="";const s=document.querySelectorAll('input[type="file"]');s.length>0&&(s[0].value=""),c.value=null;const e=document.getElementById("reg");e&&e.reset()},k=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s);w(i,s=>{s.length<7?l.value="Password must be at least 7 characters long.":l.value=""}),w(n,s=>{k(s)?o.value="":o.value="Please enter a valid email address."});const V=async()=>{if(i.value.length<7){l.value="Password must be at least 7 characters long.";return}else l.value="";if(k(n.value))o.value="";else{o.value="Please enter a valid email address.";return}const s=new FormData;s.append("name",g.value),s.append("email",n.value),s.append("password",i.value),s.append("levell",b.value),c.value&&s.append("pic",c.value),await d.register(s),setTimeout(h,2e3)};N(async()=>{await d.fetchUser(),d.resetRegistrationState()}),w(P,()=>{h()});const S=E(()=>d.regError),A=E(()=>d.regSuccess),F=s=>{const e=s.target.files[0];e&&!e.type.startsWith("image/")?(v.value="Please upload a valid image file.",c.value=null):(v.value="",c.value=e,e.value="")};return(s,e)=>(m(),u("div",j,[_(R),t("div",I,[e[14]||(e[14]=t("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[t("div",{class:"w-1/2"}),t("div",{class:"relative w-1/2 flex justify-end"}," Add an Admin ")],-1)),_(C),t("div",L,[t("main",T,[e[12]||(e[12]=t("h1",{class:"text-3xl text-black pb-6"},"Full Admin",-1)),t("div",H,[t("div",W,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold mb-4"},"Add an Admin",-1)),t("form",{onSubmit:U(V,["prevent"]),id:"reg",name:"reg"},[t("div",$,[e[5]||(e[5]=t("label",{for:"levell",class:"block text-sm font-medium text-gray-700"},"Level",-1)),x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>b.value=r),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},e[4]||(e[4]=[t("option",{value:"2"}," Limited Admin",-1),t("option",{value:"1"}," Full Admin",-1)]),512),[[B,b.value]])]),t("div",z,[e[6]||(e[6]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[y,g.value]])]),t("div",G,[e[7]||(e[7]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r),type:"email",placeholder:"Email",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[y,n.value]]),o.value?(m(),u("p",J,f(o.value),1)):p("",!0)]),t("div",K,[e[8]||(e[8]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Password",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>i.value=r),type:"password",placeholder:"Password",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[y,i.value]]),l.value?(m(),u("p",O,f(l.value),1)):p("",!0)]),t("div",Q,[e[9]||(e[9]=t("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),t("input",{type:"file",onChange:F,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),v.value?(m(),u("p",X,f(v.value),1)):p("",!0)]),e[10]||(e[10]=t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add Admin",-1)),S.value?(m(),u("p",Y,f(S.value),1)):p("",!0),A.value?(m(),u("p",Z,f(A.value),1)):p("",!0)],32)])])]),e[13]||(e[13]=t("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])]))}};export{ae as default};
