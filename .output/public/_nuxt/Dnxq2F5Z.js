import{x as Z,u as ee,a as te,r as o,o as le,w as m,c as k,b as u,d as l,e as F,f as se,m as d,j as $,t as x,g as L,v as R,h as A,_ as oe,i as S,k as ae,l as ne}from"./BkfL23Qh.js";import{u as ue,S as de,_ as re,a as ie}from"./44wPXJ-d.js";import{u as ce}from"./C-aMhIz_.js";import{S as me,M as pe}from"./BrcG7ohK.js";import{u as fe}from"./CXs0n1RF.js";import{u as ve}from"./D1evIxhf.js";import{s as D}from"./DzOTmNw2.js";import{u as be}from"./FFSxNxS3.js";import"./DoXzrDiw.js";const ge={class:"bg-gray-100 font-family-karla flex"},xe={class:"relative w-full flex flex-col h-screen overflow-y-hidden"},ye={class:"w-full h-screen overflow-x-hidden border-t flex flex-col"},we={class:"w-full flex-grow p-6"},he={class:"flex items-center justify-center bg-gray-100"},_e={class:"fullwidth90 bg-white p-8 shadow-md rounded-lg"},Ce={class:"mb-4"},ke={class:"mb-4"},Se={class:"mb-4"},Ve={class:"mb-4"},Ne={class:"mb-4"},Ue={class:"mb-4"},Te={class:"mb-4"},$e={class:"mb-4"},Ae={key:0,class:"mt-2 text-sm text-red-600"},De={key:0,class:"mt-2 text-sm text-red-600"},Me={key:1,class:"mt-2 text-sm text-red-600"},Be={__name:"[catid]",setup(Pe){const{cats:y,fetchCatsCommon:q}=fe(),{subcats:w,fetchSubcatsCommon:V}=ve(),{taggs:H,fetchTaggsCommon:I}=be(),K=ce(),W=ee(),z=te(),p=o(""),n=o(""),r=o(""),h=o(""),c=o(""),f=o(null),v=o(""),b=o(""),_=o(""),C=o(null),g=o(null),N=o([]),U=o([]),M=o(0),B=z.params.catid;B&&(n.value=B);const G=()=>{r.value=null,g.value=null},J=async()=>{const{$api:t}=ae(),e=ne().public.apiBaseUrl,s=new FormData;s.append("name",p.value),s.append("catid",n.value),s.append("subid",r.value),s.append("des",h.value),s.append("dess",c.value),s.append("taggid",N.value),f.value&&s.append("pic",f.value);try{const i=await t.post(`${e}/admin/prod/add`,s);console.log(" added successfully:",i.data),_.value="product added "+p.value+" ... you will be redircted in a monent ...",setTimeout(X,200),setTimeout(()=>{W.push("/admin/prod/viewprod")},300)}catch(i){i.response&&i.response.status===422?b.value=i.response.data.message:b.value="An unexpected error occurred."}};let P=o(null);le(async()=>{await K.fetchUser(),await q(),await V(),await I(),E();const t=$refs.multiselectcat;t&&t.$on("input",j),O();const e=$refs.multiselectcatsub;e&&e.$on("input",T),P.value=ue({content:c.value,extensions:[de],onUpdate:({editor:s})=>{c.value=s.getHTML()}})});const j=t=>{n.value=t?t.id:null,M.value+=1},T=t=>{r.value=t?t.id:null},E=()=>{if(n.value&&y.value.length){const t=Number(n.value),e=y.value.find(s=>s.id===t);C.value=e||null}},O=()=>{if(r.value&&w.value.length){const t=Number(r.value),e=w.value.find(s=>s.id===t);g.value=e||null}};m(M,t=>{t>1&&G()}),m(y,w,E),m(C,t=>{console.log("selectedCat changed:",t),j(t)}),m(g,t=>{console.log("selectedCat changed:",t),T(t)}),m(U,t=>{N.value=t.map(e=>e.id)});const Q=t=>{const e=t.target.files[0];e&&!e.type.startsWith("image/")?(v.value="Please upload a valid image file.",f.value=null):(v.value="",f.value=e)},X=async()=>{p.value="",n.value="",r.value="",N.value="",f.value=null,h.vale=null,c.value=null,v.value="",b.value="",_.value="";const t=document.querySelectorAll('input[type="file"]');t.length>0&&(t[0].value="")};return m(n,t=>{V(t)}),(t,e)=>{const s=oe,i=ie,Y=re;return S(),k("div",ge,[u(me),l("div",xe,[e[18]||(e[18]=l("header",{class:"w-full items-center bg-white py-2 px-6 hidden sm:flex"},[l("div",{class:"w-1/2"}),l("div",{class:"relative w-1/2 flex justify-end"}," Add Product ")],-1)),u(pe),l("div",ye,[l("main",we,[l("div",he,[l("div",_e,[e[16]||(e[16]=l("h1",{class:"text-2xl font-bold mb-4"},"Add Product By Category",-1)),l("p",Ce,[u(s,{to:"/admin/prod/viewprod",class:"widthmax300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:F(()=>e[7]||(e[7]=[l("i",{class:"fas fa-align-left mr-3"},null,-1),$("View Products")])),_:1})]),l("form",{onSubmit:se(J,["prevent"])},[l("div",ke,[e[8]||(e[8]=l("label",{for:"catid",class:"block text-sm font-medium text-gray-700"},"Category",-1)),u(d(D),{ref:"multiselectcat",modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=a=>C.value=a),options:d(y),label:"name","track-by":"id",placeholder:"Choose category",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:e[1]||(e[1]=a=>d(V)(n.value))},null,8,["modelValue","options"]),$(" catid "+x(n.value),1)]),l("div",Se,[e[9]||(e[9]=l("label",{for:"subid",class:"block text-sm font-medium text-gray-700"},"SubCategory",-1)),u(d(D),{ref:"multiselectsubcat",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),options:d(w),label:"name","track-by":"id",placeholder:"Choose subcategory",searchable:!0,"close-on-select":!0,"allow-empty":!1,class:"mt-1 block w-full",onChange:T},null,8,["modelValue","options","onChange"]),$(" subid "+x(r.value),1)]),l("div",Ve,[e[10]||(e[10]=l("label",{for:"taggid",class:"block text-sm font-medium text-gray-700"}," Tags ",-1)),u(d(D),{modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=a=>U.value=a),options:d(H),label:"name","track-by":"id",placeholder:"Choose tags",searchable:!0,"close-on-select":!0,"allow-empty":!0,class:"mt-1 block w-full",multiple:!0},null,8,["modelValue","options"])]),l("div",Ne,[e[11]||(e[11]=l("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Name",-1)),L(l("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),type:"text",placeholder:"Name",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none"},null,512),[[R,p.value]])]),l("div",Ue,[e[12]||(e[12]=l("label",{for:"des",class:"block text-sm font-medium text-gray-700"}," Short Description",-1)),L(l("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>h.value=a),type:"text",class:"mt-1 block w-full px-3 py-3 textareashort border border-gray-300 rounded-md"},null,512),[[R,h.value]])]),l("div",Te,[e[13]||(e[13]=l("label",{for:"dess",class:"block text-sm font-medium text-gray-700"}," Long Description",-1)),u(Y,null,{default:F(()=>[u(i,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),class:"textarealongborder",editor:d(P)},null,8,["modelValue","editor"])]),_:1})]),l("div",$e,[e[14]||(e[14]=l("label",{for:"pic",class:"block text-sm font-medium text-gray-700"},"Picture",-1)),l("input",{type:"file",onChange:Q,class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",accept:"image/*"},null,32),v.value?(S(),k("p",Ae,x(v.value),1)):A("",!0)]),e[15]||(e[15]=l("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add",-1)),b.value?(S(),k("p",De,x(b.value),1)):A("",!0),_.value?(S(),k("p",Me,x(_.value),1)):A("",!0)],32)])])]),e[17]||(e[17]=l("footer",{class:"w-full bg-white text-right p-4"},null,-1))])])])}}},We=Z(Be,[["__scopeId","data-v-0f590072"]]);export{We as default};
